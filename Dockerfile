FROM ubuntu:latest

# 安装Nginx、PHP以及必需的PHP扩展
RUN apt-get update && apt-get install -y nginx php7.4 php7.4-fpm php7.4-mysql

# 删除默认的Nginx配置文件
RUN rm /etc/nginx/sites-enabled/default

# 复制配置文件到容器
COPY nginx/default.conf /etc/nginx/sites-enabled/

# 复制PHP代码到容器
COPY src/ /var/www/html/

# 设置工作目录
WORKDIR /var/www/html

# 启动PHP-FPM和Nginx
CMD service php7.4-fpm start && nginx -g 'daemon off;'
